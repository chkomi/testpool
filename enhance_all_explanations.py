import json
import re

def create_enhanced_explanations():
    """해설.txt 파일을 바탕으로 모든 과목에 대한 상세한 해설을 생성합니다."""
    
    enhanced_explanations = {
        "농어촌정비법": {
            1: {
                "explanation": "농어촌정비법 제58조(생활환경정비사업 기본계획의 수립)",
                "detailed_explanation": "시장·군수·구청장은 생활환경정비계획에 포함된 사항을 추진하기 위하여 필요한 경우 세부 사업별로 생활환경정비사업 기본계획을 수립할 수 있습니다. 이 계획을 수립하거나 변경할 때는 해당 사업지역 주민의 의견을 듣고 시·도지사 및 관계 기관과 협의해야 하며, 이를 고시해야 합니다. 단, 대통령령으로 정하는 경미한 사항을 변경하는 경우에는 주민의견 청취와 협의가 면제됩니다.",
                "url": "https://www.law.go.kr/법령/농어촌정비법/(20250621,20581,20241220)/제58조"
            },
            2: {
                "explanation": "농어촌정비법 제23조(농업생산기반시설의 사용허가)",
                "detailed_explanation": "농업생산기반시설을 본래의 목적 범위를 벗어나거나 사용에 방해가 되는 범위로 사용하려는 자는 시장·군수·구청장의 사용허가를 받아야 합니다. 사용허가를 받은 자에게는 시설을 유지하거나 보수하는 데에 필요한 경비의 전부를 사용료로 징수할 수 있으며, 사용료를 납부하지 않으면 지방세 체납 처분의 예에 따라 징수할 수 있습니다.",
                "url": "https://www.law.go.kr/법령/농어촌정비법/(20250621,20581,20241220)/제23조"
            },
            3: {
                "explanation": "농어촌정비법 제21조(농어촌용수 오염 방지와 수질 개선 등)",
                "detailed_explanation": "오염물질이 흘러들어 농어촌용수가 오염되어 영농과 농어촌 생활환경에 지장을 줄 우려가 있다고 인정될 때, 농림축산식품부장관은 물환경보전법, 하수도법, 가축분뇨의 관리 및 이용에 관한 법률, 지하수법에 따른 명령과 조치 등을 하도록 관계 중앙행정기관의 장에게 요구할 수 있습니다. 이는 농어촌용수의 수질을 보호하고 농업생산과 농어촌 생활환경을 보전하기 위한 조치입니다.",
                "url": "https://www.law.go.kr/법령/농어촌정비법/(20250621,20581,20241220)/제21조"
            },
            4: {
                "explanation": "농어촌정비법 제16조(국가 등이 시행한 농업생산기반시설의 관리와 이관)",
                "detailed_explanation": "국가나 지방자치단체가 시행한 농업생산기반 정비사업으로 조성된 농업생산기반시설은 농림축산식품부장관이 한국농어촌공사에 인수하여 관리하도록 할 수 있습니다. 이는 농업생산기반시설의 효율적인 관리와 농업생산성 향상을 위한 제도로, 공사가 전문성을 바탕으로 시설을 체계적으로 관리할 수 있도록 합니다.",
                "url": "https://www.law.go.kr/법령/농어촌정비법/(20250621,20581,20241220)/제16조"
            },
            5: {
                "explanation": "농어촌정비법 시행령 제9조(농업생산기반 정비사업 시행계획의 수립)",
                "detailed_explanation": "농업생산기반 정비사업 시행계획에는 농업생산기반시설의 설치 및 관리에 관한 계획, 사업시행지역, 사업의 시행방법, 사업의 시행기간, 사업비 명세서, 사업 시행 지역의 위치도가 포함되어야 합니다. 이는 사업의 체계적인 추진과 투명한 예산 집행을 위한 필수 요소들입니다.",
                "url": "https://www.law.go.kr/법령/농어촌정비법 시행령/(20250807,35696,20250805)/제9조"
            },
            6: {
                "explanation": "농어촌정비법 제14조(농업생산기반 정비사업 시행으로 조성된 재산의 관리와 처분)",
                "detailed_explanation": "농업생산기반 정비사업 시행으로 조성된 재산 중 농업생산기반시설에 제공되지 아니하는 매립지·간척지·개간지·취토장 등 토지와 그 밖의 물건 등은 대통령령으로 정하는 바에 따라 농업생산기반 정비사업 시행자가 관리하고 처분할 수 있습니다. 이는 사업의 효율성과 투명성을 확보하기 위한 제도입니다.",
                "url": "https://www.law.go.kr/법령/농어촌정비법/(20250621,20581,20241220)/제14조"
            },
            7: {
                "explanation": "농어촌정비법 시행령 제52조(생활환경정비 총괄계획가의 자격 요건 등)",
                "detailed_explanation": "생활환경정비 총괄계획가로 위촉할 수 있는 사람은 농어촌지역개발 관련 학과 교수, 농어촌지역개발 분야 박사 학위 취득 후 연구경력이 3년 이상인 사람, 농어촌계획 분야에 종사하는 건축사, 농어촌계획 분야에 종사하여 기술사 수준의 전문지식과 실무경력을 가지고 있다고 시장이 인정한 사람입니다.",
                "url": "https://www.law.go.kr/법령/농어촌정비법 시행령/(20250807,35696,20250805)/제52조"
            },
            8: {
                "explanation": "농어촌정비법 제108조(자금지원)",
                "detailed_explanation": "국가와 지방자치단체는 농어촌정비법에 따른 농어촌정비사업에 필요한 자금의 전부 또는 일부를 보조하거나 융자할 수 있습니다. 이는 농어촌의 발전과 농업생산성 향상을 위한 정부의 지원 정책으로, 농어촌 정비사업의 원활한 추진을 도모합니다.",
                "url": "https://www.law.go.kr/법령/농어촌정비법/(20250621,20581,20241220)/제108조"
            }
        },
        "공운법": {
            1: {
                "explanation": "시행령 제6조(총수입액 등의 산정방법 등)",
                "detailed_explanation": "공공기관의 총수입액은 해당 기관이 영위하는 모든 사업에서 발생하는 수입의 합계를 의미합니다. 이는 공공기관의 규모와 성격을 판단하는 중요한 지표로 사용되며, 공기업과 준정부기관을 구분하는 기준이 됩니다. 총수입액의 산정에는 정부로부터 받는 보조금, 융자금 등도 포함됩니다.",
                "url": "https://www.law.go.kr/법령/공공기관의 운영에 관한 법률 시행령/(20230101,33078,20221220)/제6조"
            },
            2: {
                "explanation": "법 제4조(공공기관) / 시행령 제4조(사실상 지배력 확보의 기준)",
                "detailed_explanation": "공공기관은 정부가 자본금의 50% 이상을 출자하거나 정부가 임원의 과반수를 임면할 수 있는 권한을 가진 기관입니다. 또한 정부가 사실상 지배력을 확보하고 있는 기관도 포함됩니다. 사실상 지배력은 정부의 출자비율, 임원 임면권, 정관 변경권, 예산 승인권 등을 종합적으로 고려하여 판단합니다.",
                "url1": "https://www.law.go.kr/법령/공공기관의 운영에 관한 법률/(20240927,20400,20240326)/제4조",
                "url2": "https://www.law.go.kr/법령/공공기관의 운영에 관한 법률 시행령/(20230101,33078,20221220)/제4조"
            },
            3: {
                "explanation": "법 제7조 / 시행령 제9조(기관 신설에 대한 심사)",
                "detailed_explanation": "공공기관을 신설하려는 경우에는 운영위원회의 심사를 거쳐야 합니다. 심사에서는 해당 기관의 설립 필요성, 업무의 공공성, 정부의 지배력 확보 가능성, 재정적 타당성 등을 종합적으로 검토합니다. 이를 통해 공공기관의 무분별한 설립을 방지하고 효율적인 공공서비스 제공을 도모합니다.",
                "url1": "https://www.law.go.kr/법령/공공기관의 운영에 관한 법률/(20240927,20400,20240326)/제7조",
                "url2": "https://www.law.go.kr/법령/공공기관의 운영에 관한 법률 시행령/(20230101,33078,20221220)/제9조"
            },
            4: {
                "explanation": "법 제9조 / 시행령 제11조(운영위원회의 구성)",
                "detailed_explanation": "운영위원회는 공공기관의 운영에 관한 중요사항을 심의·의결하는 기관으로, 위원장 1명과 위원으로 구성됩니다. 위원은 기획재정부장관, 해당 공공기관의 주무부처 장관, 민간위원 등으로 구성되며, 공공기관의 효율적인 운영과 투명성을 확보하는 역할을 합니다.",
                "url1": "https://www.law.go.kr/법령/공공기관의 운영에 관한 법률/(20240927,20400,20240326)/제9조",
                "url2": "https://www.law.go.kr/법령/공공기관의 운영에 관한 법률 시행령/(20230101,33078,20221220)/제11조"
            },
            5: {
                "explanation": "법 제8조, 제14조, 시행령 제10조, 제20조, 제21조, 제48조",
                "detailed_explanation": "공공기관의 운영위원회 설치, 기능조정, 임원 임면, 경영목표 수립, 경영실적 평가 등에 관한 규정입니다. 이는 공공기관의 체계적인 운영과 정부의 효율적인 관리감독을 위한 제도적 장치로, 공공기관의 공공성과 경영효율성을 동시에 확보하기 위한 것입니다.",
                "url1": "https://www.law.go.kr/법령/공공기관의 운영에 관한 법률/(20240927,20400,20240326)/제14조",
                "url2": "https://www.law.go.kr/법령/공공기관의 운영에 관한 법률/(20240927,20400,20240326)/제8조",
                "url3": "https://www.law.go.kr/법령/공공기관의 운영에 관한 법률 시행령/(20230101,33078,20221220)/제10조",
                "url4": "https://www.law.go.kr/법령/공공기관의 운영에 관한 법률 시행령/(20230101,33078,20221220)/제20조",
                "url5": "https://www.law.go.kr/법령/공공기관의 운영에 관한 법률 시행령/(20230101,33078,20221220)/제21조",
                "url6": "https://www.law.go.kr/법령/공공기관의 운영에 관한 법률 시행령/(20230101,33078,20221220)/제48조"
            }
        },
        "공사법": {
            1: {
                "explanation": "법 제10조(사업)",
                "detailed_explanation": "한국농어촌공사는 농어촌정비법에 따른 농업생산기반 정비사업, 농지의 매수·매도·임대차, 농지의 재개발, 농업용수의 공급, 농어촌 주택개량자금의 조성 및 융자, 농지은행사업 등을 수행합니다. 이는 농업생산기반을 확충하고 농어촌의 발전을 도모하기 위한 공공기관의 핵심 사업입니다.",
                "url": "https://www.law.go.kr/법령/한국농어촌공사 및 농지관리기금법/(20220218,18403,20210817)/제10조"
            },
            2: {
                "explanation": "법 제5조의2, 제10조",
                "detailed_explanation": "한국농어촌공사는 농지은행사업을 수행할 수 있으며, 이는 농지의 효율적인 이용과 농업경영의 안정화를 위한 제도입니다. 농지은행사업을 통해 농지의 매수·매도·임대차를 중개하고, 농지의 집단화와 규모화를 촉진하여 농업생산성을 향상시킵니다.",
                "url1": "https://www.law.go.kr/법령/한국농어촌공사 및 농지관리기금법/(20220218,18403,20210817)/제10조",
                "url2": "https://www.law.go.kr/법령/한국농어촌공사 및 농지관리기금법/(20220218,18403,20210817)/제5조의2"
            },
            3: {
                "explanation": "법 제10조(사업)",
                "detailed_explanation": "한국농어촌공사는 농어촌정비법에 따른 농업생산기반 정비사업을 수행하며, 이는 농업생산성을 향상시키고 농어촌의 발전을 도모하기 위한 핵심 사업입니다. 농업생산기반 정비사업을 통해 농지의 효율적인 이용과 농업경영의 안정화를 도모합니다.",
                "url": "https://www.law.go.kr/법령/한국농어촌공사 및 농지관리기금법/(20220218,18403,20210817)/제10조"
            }
        },
        "직제규정": {
            1: {
                "explanation": "제2장 구성원",
                "detailed_explanation": "한국농어촌공사의 구성원은 이사장, 상임이사, 비상임이사, 사원으로 구성됩니다. 이사장은 공사를 대표하고 업무를 총괄하며, 상임이사는 이사장을 보좌하고 정관이 정하는 업무를 담당합니다. 비상임이사는 이사회에 참여하여 의사결정에 참여하고, 사원은 공사의 주주를 의미합니다.",
                "url": "https://www.law.go.kr/학칙공단/(한국농어촌공사) 직제규정/(9999,20250101)/제2장"
            },
            2: {
                "explanation": "제23조(정원)",
                "detailed_explanation": "공사의 직원 정원은 이사회의 의결을 거쳐 농림축산식품부장관이 정합니다. 정원은 공사의 업무량과 조직의 효율성을 고려하여 결정되며, 필요에 따라 증원 또는 감원할 수 있습니다. 정원의 변경은 이사회의 의결을 거쳐야 하며, 농림축산식품부장관의 승인을 받아야 합니다.",
                "url": "https://www.law.go.kr/학칙공단/(한국농어촌공사) 직제규정/(9999,20250101)/제23조"
            },
            3: {
                "explanation": "제3장 기구 및 분장업무",
                "detailed_explanation": "공사의 기구는 본사, 지사, 분사무소, 출장소 등으로 구성되며, 각 기구는 정관이 정하는 바에 따라 업무를 분장합니다. 본사는 공사의 중앙행정기관으로서 전체 업무를 총괄하고, 지사와 분사무소는 지역별 업무를 담당합니다.",
                "url": "https://www.law.go.kr/학칙공단/(한국농어촌공사) 직제규정/(9999,20250101)/제3장"
            }
        },
        "취업규칙": {
            1: {
                "explanation": "제19조(연차휴가)",
                "detailed_explanation": "연차휴가는 1년간 80% 이상 출근한 직원에게 15일을 부여합니다. 3년 이상 계속 근로한 직원에 대해서는 기본 휴가일수에 최초 1년을 초과하는 계속 근로 연수 2년에 대하여 1일을 가산합니다. 가산휴가를 포함한 총 휴가일수는 30일을 한도로 하며, 1년간 80% 미만 출근한 직원에게는 1개월 개근 시 1일의 연차휴가를 부여합니다.",
                "url": "https://www.law.go.kr/학칙공단/(한국농어촌공사) 취업규칙/(9999,20250101)/제19조"
            },
            2: {
                "explanation": "제27조(출장)",
                "detailed_explanation": "출장은 업무상 필요에 따라 직원을 다른 지역에 파견하는 것을 의미합니다. 출장 중인 직원에게는 출장비를 지급하며, 출장 기간은 근무시간으로 인정됩니다. 출장의 목적, 기간, 장소 등은 사전에 승인을 받아야 하며, 출장 후에는 출장보고서를 제출해야 합니다.",
                "url": "https://www.law.go.kr/학칙공단/(한국농어촌공사) 취업규칙/(9999,20250101)/제27조"
            },
            3: {
                "explanation": "제20조(특별휴가)",
                "detailed_explanation": "특별휴가는 결혼, 출산, 사망, 재해 등 특별한 사유가 있는 경우에 부여되는 휴가입니다. 결혼휴가는 3일, 출산휴가는 90일, 사망휴가는 3일, 재해휴가는 3일을 부여하며, 이는 연차휴가와 별도로 부여됩니다.",
                "url": "https://www.law.go.kr/학칙공단/(한국농어촌공사) 취업규칙/(9999,20250101)/제20조"
            }
        },
        "인사규정": {
            1: {
                "explanation": "제5조(정의)",
                "detailed_explanation": "인사규정에서 '직원'이란 공사의 정규직원을 말하며, '임용'이란 신규채용, 승진, 전보, 파견, 겸임, 겸직, 휴직, 복직, 면직, 해임, 징계, 정직, 감봉, 견책을 말합니다. '승진'이란 직급이 상위 직급으로 올라가는 것을 의미하고, '전보'는 같은 직급 내에서 다른 직무로 이동하는 것을 말합니다.",
                "url": "https://www.law.go.kr/학칙공단/(한국농어촌공사) 인사규정/(9999,20250101)/제5조"
            },
            2: {
                "explanation": "제7조(채용의 원칙), 제7조의2(외국인의 채용)",
                "detailed_explanation": "공사는 직원을 채용할 때 공정하고 투명한 절차에 따라야 하며, 적격자를 선발해야 합니다. 외국인을 채용할 경우에는 국내 인력으로 충원하기 어려운 전문분야에 한정하여 채용할 수 있으며, 이는 공사의 국제화와 전문성 향상을 위한 제도입니다.",
                "url1": "https://www.law.go.kr/학칙공단/(한국농어촌공사) 인사규정/(9999,20250101)/제7조",
                "url2": "https://www.law.go.kr/학칙공단/(한국농어촌공사) 인사규정/(9999,20250101)/제7조의2"
            },
            3: {
                "explanation": "제9조(결격사유)",
                "detailed_explanation": "결격사유는 직원으로 채용될 수 없는 사유를 말합니다. 금치산자나 한정치산자, 파산선고를 받고 복권되지 아니한 자, 금고 이상의 실형을 선고받고 그 집행이 종료되거나 집행이 면제된 날부터 3년이 경과하지 아니한 자 등이 해당합니다.",
                "url": "https://www.law.go.kr/학칙공단/(한국농어촌공사) 인사규정/(9999,20250101)/제9조"
            }
        },
        "행동강령": {
            1: {
                "explanation": "제28조(초과사례금의 신고방법 등)",
                "detailed_explanation": "임직원이 외부강의, 강연, 집필, 자문, 심사, 평가, 연구 등의 업무를 수행하고 받은 사례금이 월 10만원을 초과하는 경우, 해당 월 말일까지 행동강령책임관에게 신고해야 합니다. 이는 공정한 직무수행을 해치는 지시에 대한 처리와 관련된 규정으로, 임직원의 투명성과 청렴성을 확보하기 위한 제도입니다.",
                "url": "https://www.law.go.kr/학칙공단/한국농어촌공사 임직원 행동강령/(9999,20241231)/제28조"
            },
            2: {
                "explanation": "제38조(행동강령책임관의 지정)",
                "detailed_explanation": "공사는 행동강령의 이행과 위반행위의 조사·처리를 담당하는 행동강령책임관을 지정해야 합니다. 행동강령책임관은 임직원의 행동강령 준수 여부를 점검하고, 위반행위가 발생한 경우 이를 조사하여 적절한 조치를 취합니다. 이를 통해 공사의 청렴성과 투명성을 확보합니다.",
                "url": "https://www.law.go.kr/학칙공단/한국농어촌공사 임직원 행동강령/(9999,20241231)/제38조"
            },
            3: {
                "explanation": "제25조(금품등의 수수 금지)",
                "detailed_explanation": "임직원은 직무와 관련하여 금품, 향응, 접대, 편의 등을 제공받거나 요구하여서는 아니 됩니다. 이는 공정한 직무수행을 해치는 지시에 대한 처리와 관련된 규정으로, 임직원의 청렴성과 투명성을 확보하기 위한 제도입니다.",
                "url": "https://www.law.go.kr/학칙공단/한국농어촌공사 임직원 행동강령/(9999,20241231)/제25조"
            }
        },
        "회계기준": {
            1: {
                "explanation": "제109조(검사원의 임면)",
                "detailed_explanation": "검사원은 공사의 업무와 재산상황을 검사하는 역할을 담당합니다. 검사원은 이사회에서 선임하며, 공사의 임원이나 직원을 겸할 수 없습니다. 검사원은 공사의 업무집행상황과 재산상황을 검사하여 이사회에 보고하고, 필요시 이사회 소집을 요구할 수 있습니다.",
                "url": "https://www.law.go.kr/학칙공단/(한국농어촌공사) 공기업·준정부기관회계기준 시행세칙/(9999,20250301)/제109조"
            },
            2: {
                "explanation": "제116조(검사순위 및 방법)",
                "detailed_explanation": "검사원의 검사는 회계연도 종료 후 3개월 이내에 실시해야 합니다. 검사는 서류검사와 현장검사를 병행하여 실시하며, 필요시 관계인을 출석시켜 질문하거나 관계 서류의 제출을 요구할 수 있습니다. 검사 결과는 검사보고서로 작성하여 이사회에 제출합니다.",
                "url": "https://www.law.go.kr/학칙공단/(한국농어촌공사) 공기업·준정부기관회계기준 시행세칙/(9999,20250301)/제116조"
            },
            3: {
                "explanation": "제108조(하자조치)",
                "detailed_explanation": "하자조치는 공사업무 수행 중 발생한 하자에 대한 보수나 보완 조치를 말합니다. 하자조치는 공사의 품질관리와 고객만족을 위한 중요한 업무로, 하자 발생 시 신속하고 정확한 조치를 통해 공사의 신뢰성을 확보합니다.",
                "url": "https://www.law.go.kr/학칙공단/(한국농어촌공사) 공기업·준정부기관회계기준 시행세칙/(9999,20250301)/제108조"
            }
        }
    }
    
    return enhanced_explanations

def update_exam_file_with_enhanced_explanations():
    """2025-exam.js 파일에 향상된 상세한 해설을 추가합니다."""
    
    # 향상된 상세한 해설 데이터 생성
    enhanced_explanations = create_enhanced_explanations()
    
    # 2025-exam.js 파일 읽기
    with open('2025-exam.js', 'r', encoding='utf-8') as f:
        content = f.read()
    
    # 각 과목별로 상세한 해설 추가
    for subject, questions in enhanced_explanations.items():
        for question_num, explanation_data in questions.items():
            # 해당 과목 섹션 찾기
            subject_pattern = rf'"{subject}":\s*\[(.*?)\]'
            subject_match = re.search(subject_pattern, content, re.DOTALL)
            
            if subject_match:
                subject_content = subject_match.group(1)
                
                # 해당 문제 번호 찾기 (1부터 시작하는 인덱스)
                question_index = question_num - 1
                
                # 문제 패턴 찾기 (더 정확한 패턴)
                question_pattern = r'\{[^}]*"question"[^}]*"explanation"[^}]*\}'
                questions_found = re.findall(question_pattern, subject_content)
                
                if question_index < len(questions_found):
                    target_question = questions_found[question_index]
                    
                    # explanation 필드가 비어있는지 확인
                    if '"explanation": ""' in target_question:
                        # explanation 필드 업데이트
                        old_explanation_pattern = r'"explanation":\s*""'
                        new_explanation = f'"explanation": "{explanation_data["explanation"]}", "detailed_explanation": "{explanation_data["detailed_explanation"]}"'
                        
                        # URL 필드 추가
                        if "url" in explanation_data:
                            new_explanation += f', "url": "{explanation_data["url"]}"'
                        elif "url1" in explanation_data:
                            new_explanation += f', "url1": "{explanation_data["url1"]}", "url2": "{explanation_data["url2"]}"'
                        
                        # 해당 문제 업데이트
                        updated_question = re.sub(old_explanation_pattern, new_explanation, target_question)
                        
                        # 전체 내용에서 해당 문제 업데이트
                        content = content.replace(target_question, updated_question)
    
    # 업데이트된 내용 저장
    with open('2025-exam.js', 'w', encoding='utf-8') as f:
        f.write(content)
    
    print("향상된 상세한 해설이 성공적으로 추가되었습니다!")

if __name__ == "__main__":
    update_exam_file_with_enhanced_explanations() 