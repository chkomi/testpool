<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2025ë…„ ì‹œí—˜ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸</title>
    <style>
        body { font-family: 'Malgun Gothic', sans-serif; margin: 20px; }
        .container { max-width: 800px; margin: 0 auto; }
        .subject-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 20px 0; }
        .subject-card { border: 1px solid #ddd; padding: 15px; border-radius: 8px; cursor: pointer; }
        .subject-card:hover { background: #f5f5f5; }
        .subject-card.loaded { background: #e8f5e8; border-color: #4caf50; }
        .stats { background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 20px 0; }
        .questions { margin-top: 20px; }
        .question { background: white; border: 1px solid #ddd; padding: 15px; margin: 10px 0; border-radius: 8px; }
        .loading { text-align: center; color: #666; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“ 2025ë…„ ì‹œí—˜ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸</h1>
        
        <div class="stats" id="stats">
            <h3>ğŸ“Š ì‹œìŠ¤í…œ í†µê³„</h3>
            <div id="statsContent">ë¡œë”© ì¤‘...</div>
        </div>
        
        <h3>ğŸ“š ê³¼ëª©ë³„ ë¡œë“œ í…ŒìŠ¤íŠ¸</h3>
        <div class="subject-grid" id="subjectGrid">
            <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
        </div>
        
        <div class="questions" id="questions">
            <!-- ì„ íƒëœ ê³¼ëª©ì˜ ë¬¸ì œë“¤ì´ ì—¬ê¸°ì— í‘œì‹œë¨ -->
        </div>
    </div>

    <script src="2025-exam-optimized.js"></script>
    <script>
        // DOM ë¡œë“œ í›„ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            initializeTestPage();
        });
        
        function initializeTestPage() {
            updateStats();
            createSubjectCards();
        }
        
        function updateStats() {
            const stats = window.getExamStats2025();
            const performance = window.exam2025Performance.getStats();
            
            document.getElementById('statsContent').innerHTML = `
                <p><strong>ì´ ê³¼ëª© ìˆ˜:</strong> ${stats.total_subjects}</p>
                <p><strong>ì´ ë¬¸ì œ ìˆ˜:</strong> ${stats.total_questions}</p>
                <p><strong>ë¡œë“œëœ ê³¼ëª©:</strong> ${stats.loading_progress}</p>
                <p><strong>ì„¸ì…˜ ì‹œê°„:</strong> ${Math.round(performance.session_duration / 1000)}ì´ˆ</p>
                <p><strong>í‰ê·  ë¡œë“œ ì‹œê°„:</strong> ${Math.round(performance.average_load_time || 0)}ms</p>
            `;
        }
        
        function createSubjectCards() {
            const subjects = window.getAllSubjects2025();
            const grid = document.getElementById('subjectGrid');
            
            grid.innerHTML = subjects.map(subject => {
                const metadata = window.getSubjectMetadata2025(subject);
                return `
                    <div class="subject-card" data-subject="${subject}" onclick="loadSubjectTest('${subject}')">
                        <h4>${subject}</h4>
                        <p>ë¬¸ì œ ìˆ˜: ${metadata.total_questions}ê°œ</p>
                        <p>ìƒíƒœ: <span id="status-${subject}">${metadata.loaded ? 'ë¡œë“œë¨' : 'ëŒ€ê¸°ì¤‘'}</span></p>
                    </div>
                `;
            }).join('');
        }
        
        async function loadSubjectTest(subjectName) {
            const statusEl = document.getElementById(`status-${subjectName}`);
            const card = document.querySelector(`[data-subject="${subjectName}"]`);
            
            try {
                statusEl.textContent = 'ë¡œë”©ì¤‘...';
                
                const startTime = Date.now();
                const questions = await window.getQuestionsForSubject2025(subjectName);
                window.exam2025Performance.recordLoadTime(subjectName, startTime);
                
                statusEl.textContent = 'ë¡œë“œë¨';
                card.classList.add('loaded');
                
                displayQuestions(subjectName, questions.slice(0, 3)); // ì²˜ìŒ 3ë¬¸ì œë§Œ í‘œì‹œ
                updateStats();
                
            } catch (error) {
                statusEl.textContent = 'ì‹¤íŒ¨';
                console.error('ë¡œë“œ ì‹¤íŒ¨:', error);
                alert(`${subjectName} ë¡œë“œ ì‹¤íŒ¨: ${error.message}`);
            }
        }
        
        function displayQuestions(subjectName, questions) {
            const questionsEl = document.getElementById('questions');
            
            questionsEl.innerHTML = `
                <h3>ğŸ“‹ ${subjectName} (ìƒ˜í”Œ ${questions.length}ë¬¸ì œ)</h3>
                ${questions.map((q, index) => `
                    <div class="question">
                        <h4>ë¬¸ì œ ${index + 1}</h4>
                        <p><strong>Q:</strong> ${q.question}</p>
                        <p><strong>ì •ë‹µ:</strong> ${q.correct}</p>
                        <p><strong>í•´ì„¤:</strong> ${q.explanation}</p>
                        ${q.detailedExplanation ? `<p><strong>ìƒì„¸í•´ì„¤:</strong> ${q.detailedExplanation.substring(0, 200)}...</p>` : ''}
                    </div>
                `).join('')}
            `;
        }
    </script>
</body>
</html>